#!/usr/bin/env python3

from shutil import copyfile
from os import listdir, path, getcwd


pkg  = "intersectingstreets"

src  = path.join(getcwd(), "build/static/js")
dest = path.join(getcwd(), "../myschoolcommute2/vendor/assets/javascripts/react_modules")

file_map = {
  '1': 'vendor',
  'main': 'main',
  'runtime~main': 'runtime',
}


# Build

for filename in listdir(src):
  file_path = path.join(src, filename)

  if path.isfile(file_path):
    file_base, file_ext = path.splitext(filename)

    if file_ext == '.js':
      file_key = file_base.split('.')[0]
      file_dest = path.join(dest, "%s-%s.min.js" % (pkg, file_map[file_key]))

      copyfile(file_path, file_dest)
      

# vim: ft=python
